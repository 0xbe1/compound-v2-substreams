specVersion: 0.1.0
description: Your substream(s) description here

modules:
  - name: block_to_hello_world
    kind: map
    startBlock: 14440000
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: map_hello_world
    inputs:
      - source: sf.ethereum.type.v1.Block
    output:
      type: proto:sf.ethereum.type.v1.TransactionTrace

  - name: handle_mint
    kind: map
    startBlock: 9475627
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: map_mint
    inputs:
      - source: sf.ethereum.type.v1.Block
    output:
      type: String

  - name: store_tokens
    kind: store
    updatePolicy: replace
    valueType: proto:compound.types.v1.Token
    startBlock: 7710671
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: store_tokens
    inputs:
      - source: sf.ethereum.type.v1.Block

  - name: store_market
    kind: store
    updatePolicy: replace
    valueType: proto:compound.types.v1.Market
    startBlock: 7710671
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: store_market
    inputs:
      - source: sf.ethereum.type.v1.Block

  - name: block_to_erc_20_transfer
    kind: map
    startBlock: 14440000
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: map_erc_20_transfer
    inputs:
      - source: sf.ethereum.type.v1.Block
    output:
      type: proto:eth.erc20.v1.Transfers

  - name: erc_20_transfer
    kind: store
    startBlock: 14440000
    updatePolicy: replace
    valueType: bytes
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: build_erc_20_transfer_state
    inputs:
      - map: block_to_erc_20_transfer

  - name: erc_20_transfers
    kind: map
    startBlock: 14440000
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: map_number_of_transfers_erc_20_transfer
    inputs:
      - map: block_to_erc_20_transfer
    output:
      type: proto:eth.counter.v1.Counter

  - name: created_contracts
    kind: map
    startBlock: 14440000
    code:
      type: wasm/rust-v1
      file: ./target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: map_contract_creation
    inputs:
      - source: sf.ethereum.type.v1.Block
    output:
      type: proto:eth.contract.v1.Contracts
